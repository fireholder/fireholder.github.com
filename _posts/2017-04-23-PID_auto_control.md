---
title: PID参数整定与自动控制
tags: [算法]
---

<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 -->

- [方法概述](#方法概述)
	- [一般整定公式](#一般整定公式)
	- [观察曲线](#观察曲线)
	- [口诀](#口诀)
- [参数整定](#参数整定)
	- [几个基本概念](#几个基本概念)
	- [P 纯比例作用趋势图的特征分析](#p-纯比例作用趋势图的特征分析)
		- [输出曲线和被调量曲线的推论](#输出曲线和被调量曲线的推论)
	- [I 纯积分作用趋势图的特征分析](#i-纯积分作用趋势图的特征分析)
		- [单纯积分作用的特性总结](#单纯积分作用的特性总结)
	- [D 纯微分作用趋势图的特征分析](#d-纯微分作用趋势图的特征分析)
		- [推论](#推论)
	- [总结](#总结)
	- [比例积分作用的特征曲线分析](#比例积分作用的特征曲线分析)
	- [比例积分微分作用的特征曲线分析](#比例积分微分作用的特征曲线分析)
- [具体方法](#具体方法)
	- [孤立简化](#孤立简化)
	- [整定比例带](#整定比例带)
	- [整定积分时间](#整定积分时间)
	- [整定微分作用](#整定微分作用)
		- [微分的使用条件](#微分的使用条件)

<!-- /TOC -->

# 方法概述

## 一般整定公式
Ｋ<sub>ｐ</sub>＝０.６*Ｋｍ

Ｋ<sub>ｄ</sub>＝Ｋ<sub>ｐ</sub> \* π／4*ω

Ｋ<sub>ｉ</sub>  ＝  Ｋ<sub>ｐ</sub> \* ω／π

其中：

Ｋ<sub>ｐ</sub>为比例控制参数      
Ｋ<sub>ｄ</sub>为微分控制参数         
Ｋ<sub>ｉ</sub>为积分控制参数          
Ｋｍ为系统开始振荡时的比例值；    
ω 为极坐标下振荡时的频率

## 观察曲线

观察曲线是发现问题的最方便的办法。    
我们要收集的曲线有：

1.  设定值。作为比较判断依据；
2.  被调量波动曲线。
3.   PID 输出。

就这么简单，如果是串级调节系统，我们还要收集：

4.   副调的被调量曲线；
5.   PID 输出曲线。

## 口诀

* 普遍版   
参数整定找最佳, 从小到大顺序查。  
先是比例后积分, 最后再把微分加。    
曲线振荡很频繁, 比例度盘要放大。   
曲线漂浮绕大弯, 比例度盘往小扳。     
曲线偏离回复慢, 积分时间往下降。    
曲线波动周期长, 积分时间再加长。    
曲线振荡频率快, 先把微分降下来。    
动差大来波动慢, 微分时间应加长。    
理想曲线两个波, 前高后低四比一。    
一看二调多分析, 调节质量不会低。        

* 趋势读定法版          
自动调节并不难,复杂系统化简单。    
整定要练硬功夫,图形特征看熟练。          
趋势读定三要素,设定被调和输出。     
三个曲线放一起,然后曲线能判读。   
积分微分先去掉,死区暂时也不要。        
比例曲线最简单,被调输出一般般。   
顶点谷底同时刻,升降同时同拐点。    
波动周期都一样,静态偏差没法办。     
比例从弱渐调强,阶跃响应记时间。  
时间放大十来倍,调节周期约在内。      
然后比例再加强,没有周期才算对。     
静差消除靠积分,能消静差就算稳。           
不管被调升或降,输出只管偏差存。       
输入偏差等于零,输出才会不积分。           
积分不可加太强,干扰调节成扰因。       
被调拐点零点间,输出拐点仔细辨,         
积分拐点再靠前,既消静差又不乱。           
微分分辨最容易,输入偏差多注意。           
偏差不动微分死,偏差一动就积极。           
跳动之后自动回,微分时间管回归。           
系统若有大延迟,微分超前最适宜。          
风压水位易波动,微分作用要丢弃。            
比例积分和微分,曲线判读特征真。            
如果不会看曲线,多看杖策行吟文。            
综合比较灵活用,盛极而衰来扼杀因。         

# 参数整定  

整定参数的方法有理论计算法和经验试凑法两种。

我们可以依靠分析比例、积分、微分的基本性质，判读趋势图中，比例、积分、微分的基本曲线特征， 从而对 PID 参数进行整定。这种依靠对趋势图的判读，
整定参数的办法，称之为：趋势读定法。

趋势读定法三要素：设定值、被调量、输出。三个曲线缺一不可。

## 几个基本概念   
  *单回路*：就是只有一个 PID 的调节系统。    

  *串级*： 一个 PID 不够用怎么办？把两个 PID 串接起来， 形成一个串级调节系统。 又叫双回路调节系统。 在第三章里面， 咱们还会更详细的讲解串级调节系统。 在此先不作过多介绍。

  *主调*：串级系统中，要调节被调量的那个 PID 叫做主调。

  *副调*： 串级系统中， 输出直接去指挥执行器动作的那个 PID 叫做副调。 主调的输出进入副调作为副调的设定值。一般来说，主调为了调节被调量，副调为了消除干扰。

  *正作用*： 比方说一个水池有一个进水口和一个出水口， 进水量固定不变， 依靠调节出水口的水量调节水池水位。 那么水位如果高了， 就需要调节出水量增大， 对于 PID 调节器
来说，输出随着被调量增高而增高，降低而降低的作用，叫做正作用。

  *负作用*：还是这个水池，我们把出水量固定不变，而依靠调节进水量来调节水池水位。那么如果水池水位增高， 就需要关小进水量。 对于 PID 调节器来说， 输出随着被调量的增高而降低的作用叫做负作用。

  *动态偏差*： 在调节过程中， 被调量和设定值之间的偏差随时改变， 任意时刻两者之间的偏差叫做动态偏差。简称动差。

  *静态偏差*： 调解趋于稳定之后， 被调量和设定值之间还存在的偏差叫做静态偏差。 简称静差。

  *回调*：调节器调节作用显现，使得被调量开始由上升变为下降，或者由下降变为上升。

  *阶跃*： 被观察的曲线呈垂直上升或者下降， 这种情况在异常情况下是存在的， 比如人为修改数值，或者短路开路。

## P 纯比例作用趋势图的特征分析

一般来说， 设定值不会经常改变， 那就是说： 当设定值不变的时候， 调节器的输出只与被调量的波动有关。那么我们可以基本上得出如下一个概念性公式：

<center>输出波动=被调量波动*比例增益 （注：当设定值不变）</center>              


结论：对于一个单回路调节系统， 单纯的比例作用下，输出的波形与被调量的波形完全相似。

### 输出曲线和被调量曲线的推论

1.  对于正作用的调节系统，顶点、谷底均发生在同一时刻。
2.  对于负作用的调节系统，被调量的顶点就是输出的谷底，谷底就是输出的顶点。
3.  对于正作用的调节系统， 被调量的曲线上升， 输出曲线就上升； 被调量曲线下降，
输出曲线就下降。两者趋势完全一样。
4.  对于负作用的调节系统，被调量曲线和输出曲线相对。 波动周期完全一致。
5.  只要被调量变化，输出就变化；被调量不变化，不管静态偏差有多大，输出也不会变化。

![](http://ogw6sutvr.bkt.clouddn.com/p_P.jpg)

## I 纯积分作用趋势图的特征分析

积分相当于一个斜率发生器。 启动这个发生器的前提是调节器的输如偏差不等于零， 斜率的大小与两个参数有关：输入偏差的大小、积分时间。

### 单纯积分作用的特性总结
1.  输出的升降与被调量的升降无关，与输入偏差的正负有关。
2.  输出的升降与被调量的大小无关。
3.  输出的斜率与被调量的大小有关。
4.  被调量不管怎么变化，输出始终不会出现阶跃扰动。
5.  被调量达到顶点的时候，输出的变化趋势不变，速率开始减缓。
6.  输出曲线达到顶点的时候，必然是输入偏差等于零的时候。

![](http://ogw6sutvr.bkt.clouddn.com/p_I.jpg)

## D 纯微分作用趋势图的特征分析

被调量不动，输出不动；被调量一动，输出马上跳。

### 推论
1. 微分作用与被调量的大小无关，与被调量的变化速率有关；
2. 与被调量的正负无关， 与被调量的变化趋势有关；
3. 如果被调量有一个阶跃，就相当于输入变化的速度无穷大，那么输出会直接到最小或者最大；
4. 微分参数有的是一个，用微分时间表示。有的分为两个：微分增益和微分时间。微分增益表示输出波动的幅度，波动后还要输出回归，微分时间表示回归的快慢。如图：KD 是微分增益，TD 是微分时间。
5. 由第 4 条得出推论：波动调节之后，输出还会自动拐回头。

![](http://ogw6sutvr.bkt.clouddn.com/p_D.jpg)

## 总结

  比例作用：输出与输入曲线相似。   
  积分作用：只要输入有偏差输出就变化。         
  微分作用：输入有抖动输出才变化，且会猛变化。        

## 比例积分作用的特征曲线分析

![](http://ogw6sutvr.bkt.clouddn.com/PI.jpg)

从上面的分析可以看出：*判断 t6 时刻的先后，或者说 t6 距离 t5 的时间，是判断积分作用强弱的标准*。

## 比例积分微分作用的特征曲线分析

![](http://ogw6sutvr.bkt.clouddn.com/PID.jpg)

当微分增益发挥作用后， 随之微分使得输出回归， 回归时间与微分时间有关系。 微分时间使得输出一直下降，本该回复到初始值。可是在 T1 时刻，比例发挥作用，使得输出恢复到比例输出的基础； 积分发挥作用， 使得在比例的基础上再增加一些， 增加量与积分时间有关。所以，T2 时刻输出是个拐点，开始回升。T3 时刻，当输出的调节使得被调量发生改变的时候， 比例使得输出随之下降； 积分使得输出上升速率开始降低， 但仍旧上升； 微分使得输出下降。T3 时刻开始，微分增益发挥作用后，微分时间本来需要输出回归，输出减小，可是因为被调量在不断的下降，所以微分增益的作用始终存在，输出继续下降。T4 时刻，
比例作用盖过积分，比例积分开始回调。 T5 时刻， 积分作用为 0， 被调量越过零后， 开始出现正偏差，积分也会向正向发挥作用，所以比例积分微分作用曲线更陡了。T6 时刻是个关键的时刻。 因为如果没有微分作用， 这个时刻就不是关键点。 此时被调量的变化开始变缓慢，微分时间使得系统回调收缩。微分时间越短，T6 时刻越靠前，足够短的时候，会发生很多毛刺。 毛刺增加了执行机构的动作次数， 增加了不必要的调节浪费， 对系统调节有害。

 下图是微分时间过短造成的调节毛刺（如图微分时间过短造成输出波形有毛刺）。T8 时刻，被普遍认为是微分的超前调节发挥作用的时刻。此时被调量刚开始回调，而微分作用使得输出 “提前” 调节了一些。  对于微分的超前调节作用，个人认为，T6 和 T8 时刻，同样值得关注。

 ![](http://ogw6sutvr.bkt.clouddn.com/maoci.jpg)

 我们在整定系统的时候， 要有这么一个观念： 比例积分微分三个参数的大小都不是绝对的， 都是相对的。

# 具体方法
## 孤立简化
1. 把串级调节系统孤立成两个单回路。把主、副调隔离开来，先整定一个回路，再全面考虑；
2. 至于先整定内回路还是先整定外回路，因系统而异。一般来说，对于调节周期长的系统可以先整定内回路。我们还可以手动调整系统稳定后，投入自动，先整定内回路；
3.  把相互耦合的系统解耦为几个独立的系统，在稳态下，进行参数判断。让各个系统之间互不干扰，然后再考虑耦合；
4.  把 P、I、D 隔离开来。先去掉积分、微分作用，让系统变为纯比例调节方式。然后再考虑积分，然后再考虑微分。

## 整定比例带

整定比例作用比较笨的办法， 逐渐加大比例作用， 一直到系统发生等幅震荡， 然后在这个基础上适当减小比例作用即可，或者把比例增益乘以 0.6~0.8。

亲自操作执行机构， 或者查找运行操作的历史趋势， 查找或者令执行机构的输出有一个足够的阶跃量——这个阶跃量要足够大， 但是千万不能给稳定运行带来危险——然后观察被调量多久之后开始有响应。 记录下响应时间。 然后在整定参数的时候， 你所整定的系统的波动周期， 大约是你记录响应时间的 3-8 倍。

最终你所整定的系统，其调节效果应该是被调量波动小而平缓。在一个扰动过来之后，被调量的波动应该是一很有名的说法： “一大一小两个波”。 *不管是被调量还是调节输出， 其曲线都不应该有强烈的周期特征*。

## 整定积分时间

对于主调来说， 主调的目的就是为了消除静态偏差。 如果能够消除静态偏差， 积分作用就可以尽量的小。 在整定比例作用的时候，积分作用先取消。比例作用整定好的时候，就需要逐渐加强积分作用，直到消除静差为止。

我们需要注意的是： 一般情况下， 如果比例参数设置不合理， 那么静差也往往难以消除。在没有设置好比例作用的时候，初学者往往以为是积分作用不够强，就一再加强比例作用，结果造成了积分的干扰。

![](http://ogw6sutvr.bkt.clouddn.com/zhengwei.jpg)

图中，我们最需要关注的几个点是：t5、t6、t7。在 t5，t7 之间，t6 的时刻反映了积分的强度。t6 过于靠近 t5，则积分作用过弱；t6 过于靠近 t7，则积分作用过强。t6 所处的位置，应该在 t5、t7之间的 1/3 靠前一点。也就是说，t6的位置在 t5～（t7—t5）\*1/3 之间。为了记住（t7—t5）之间的这个特征点，我们可以把 `（t7 —t5）\*1/3`  的这个区域叫做积分拐点。**积分拐点这个概念很重要，输出的拐点不能比积分拐点更靠后。**


 积分作用和比例作用是相对的。 当比例作用强的时候， 积分也可以随之增强； 比例作用弱的时候， 积分也必须随之下调。 积分作用只是辅助比例作用进行调节，它仅仅是为了消除静态偏差。

## 整定微分作用


微分的目的许多人都知道：它具有超前调节的功能。微分为什么具有超前调节作用？

1.  波动来临时， 不管波动的幅度有多大， 只要波动
的速度够大， 调节器就会令输出大幅度调整。 也
就是说， 波动即将来临的时候， 波动的征兆就是
被调量的曲线开始上升。 对于比例和积分作用来
说， 开始上升不意味着大幅度调节； 对于微分作
用来说，开始上升就意味着调节进行了，因为“开始”的时候，如果速度上去了，
输出就可以有一个大幅度的调整。这是超前调节的作用之一。见图 6 的 T8 时刻。

2.  波动结束后， 如果调节器调节合理， 一般被调量经过一个静止期后， 还会稍微回调一点。在被调量处于静止期间，因为微分时间的作用，不等被调量回调，调节器首
先回调。这是微分的超前作用之二。


### 微分的使用条件

1. 被调量是水位、 气压、 风压的调节系统不宜使用微分。 它们本身的数值容易受各种因素影响， 即使稳定的系统， 被调量也很难稳定在一个数值。 微分作用会因为被调量的小波动， 使得输出大幅度来回动作，形成干扰，而且对执行机构也不利；
2. 被调量有微小扰动的时候，要先消除扰动再使用微分。
3. 系统有大迟延的情况下应使用微分。

> 参考文献：   
《从入门到精通--吃透PID》
